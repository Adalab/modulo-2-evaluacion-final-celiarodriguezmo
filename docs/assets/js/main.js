"use strict";const inputSearch=document.querySelector(".js-input-search"),btnSearch=document.querySelector(".js-btn-search");let resultList=document.querySelector(".js-list");const urlApiCocktails="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=";let SearchResults=[],textSearchByUser="",favList=document.querySelector(".js-list-favs"),arrayFavoritos=[];function handleUserSearchForm(){textSearchByUser=inputSearch.value,fetch(`${urlApiCocktails}${textSearchByUser}`).then(t=>t.json()).then(t=>{resultList.innerHTML="",SearchResults=t.drinks,paintResults();const e=document.getElementsByClassName("js-li");for(const t of e)t.addEventListener("click",addFavouriteCocktail)})}function paintResults(){for(const t of SearchResults)paintCockteles(t,resultList)}function paintCockteles(t,e){let a="";a+=`<li class="js-li js-fav-li" data-id="${t.idDrink}">`,a+="<article>",a+=`<h3>${t.strDrink}</h3>`,a+=`<img src="${t.strDrinkThumb}"\n  alt="Imagen del cocktail buscado" class="img"/>`,a+="</article>",a+="</li>",e.innerHTML+=a}function addFavouriteCocktail(t){const e=t.currentTarget.dataset.id;checkFavCocktails(SearchResults.filter(t=>e===t.idDrink)[0])}function paintFavourites(){favList.innerHTML="";for(const t of arrayFavoritos)paintCockteles(t,favList),console.log(t.idDrink),paintButtonXFavorites(t.idDrink)}function checkFavCocktails(t){-1===arrayFavoritos.findIndex(e=>e.idDrink===t.idDrink)?(arrayFavoritos.push(t),localStorage.setItem("arrayFavoritosStored",JSON.stringify(arrayFavoritos)),event.currentTarget.classList.add("favourite"),paintFavourites()):(console.log("ya estabas en favoritos"),event.currentTarget.classList.remove("favourite"),removeFavouriteCocktail(event))}btnSearch.addEventListener("click",handleUserSearchForm);const saveFavorites=JSON.parse(localStorage.getItem("arrayFavoritosStored"));function paintButtonXFavorites(t){let e="";e+=`<div class="js-xButton hidden " data-id="${t}">`,e+="x",e+="</div>",favList.innerHTML+=e;let a=document.getElementsByClassName("js-xButton");for(const t of a)t.addEventListener("click",removeFavouriteCocktail)}function removeFavouriteCocktail(t){const e=t.currentTarget.dataset.id;console.log(e);const a=arrayFavoritos.filter(t=>e===t.idDrink)[0];console.log(a),removePosition(a),console.log(arrayFavoritos)}function removePosition(t){let e=arrayFavoritos.findIndex(e=>e.idDrink===t.idDrink);arrayFavoritos.splice(e,1),paintFavourites(),localStorage.setItem("arrayFavoritosStored",JSON.stringify(arrayFavoritos))}null!==saveFavorites?(arrayFavoritos=saveFavorites,paintFavourites()):(console.log("no hay nada en local"),handleUserSearchForm(event));